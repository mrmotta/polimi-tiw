<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
         version="4.0">

    <context-param>
        <param-name>dbUrl</param-name>
        <param-value>jdbc:mysql://localhost:3306/docmanager?serverTimezone=UTC</param-value>
    </context-param>
    <context-param>
        <param-name>dbUser</param-name>
        <param-value>tiw</param-value>
    </context-param>
    <context-param>
        <param-name>dbPassword</param-name>
        <param-value>mysqltiw</param-value>
    </context-param>
    <context-param>
        <param-name>dbDriver</param-name>
        <param-value>com.mysql.cj.jdbc.Driver</param-value>
    </context-param>

    <filter>
        <filter-name>CheckHome</filter-name>
        <filter-class>it.polimi.tiw.filters.CheckHome</filter-class>
    </filter>
    <filter>
        <filter-name>CheckLoginSignup</filter-name>
        <filter-class>it.polimi.tiw.filters.CheckLoginSignup</filter-class>
    </filter>
    <filter>
        <filter-name>NoCacher</filter-name>
        <filter-class>it.polimi.tiw.filters.NoCacher</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>CheckHome</filter-name>
        <url-pattern>/home/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>CheckLoginSignup</filter-name>
        <url-pattern>/login/*</url-pattern>
        <url-pattern>/signup/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>NoCacher</filter-name>
        <url-pattern>/login/*</url-pattern>
        <url-pattern>/signup/*</url-pattern>
        <url-pattern>/home/*</url-pattern>
    </filter-mapping>

    <servlet>
        <servlet-name>Controller</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.backend.Controller</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>Error</servlet-name>
        <servlet-class>it.polimi.tiw.utilities.ErrorHandler</servlet-class>
        <init-param>
            <param-name>html_400</param-name>
            <param-value>/WEB-INF/error_400.html</param-value>
        </init-param>
        <init-param>
            <param-name>html_404</param-name>
            <param-value>/WEB-INF/error_404.html</param-value>
        </init-param>
        <init-param>
            <param-name>html_405</param-name>
            <param-value>/WEB-INF/error_405.html</param-value>
        </init-param>
        <init-param>
            <param-name>html_500</param-name>
            <param-value>/WEB-INF/error_500.html</param-value>
        </init-param>
    </servlet>
    <servlet>
        <servlet-name>Login</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.frontend.Login</servlet-class>
        <init-param>
            <param-name>html</param-name>
            <param-value>/WEB-INF/login.html</param-value>
        </init-param>
    </servlet>
    <servlet>
        <servlet-name>Sign-up</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.frontend.Signup</servlet-class>
        <init-param>
            <param-name>html</param-name>
            <param-value>/WEB-INF/signup.html</param-value>
        </init-param>
    </servlet>
    <servlet>
        <servlet-name>Logout</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.backend.Logout</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>Home</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.frontend.Home</servlet-class>
        <init-param>
            <param-name>html</param-name>
            <param-value>/WEB-INF/home.html</param-value>
        </init-param>
    </servlet>
    <servlet>
        <servlet-name>Document</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.backend.File</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>Create folder</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.backend.CreateFolder</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>Create file</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.backend.CreateFile</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>Folder</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.backend.SubFolder</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>Check Move file</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.backend.MoveFile</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>Delete</servlet-name>
        <servlet-class>it.polimi.tiw.controllers.backend.Deletion</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>Controller</servlet-name>
        <url-pattern></url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Error</servlet-name>
        <url-pattern>/error/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Login</servlet-name>
        <url-pattern>/login/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Sign-up</servlet-name>
        <url-pattern>/signup/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Logout</servlet-name>
        <url-pattern>/logout/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Home</servlet-name>
        <url-pattern>/home/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Document</servlet-name>
        <url-pattern>/home/folder/document/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Create folder</servlet-name>
        <url-pattern>/home/create/folder/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Create file</servlet-name>
        <url-pattern>/home/create/file/</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Folder</servlet-name>
        <url-pattern>/home/folder/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Check Move file</servlet-name>
        <url-pattern>/home/move/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Delete</servlet-name>
        <url-pattern>/home/delete/*</url-pattern>
    </servlet-mapping>

    <error-page>
        <error-code>400</error-code>
        <location>/error/</location>
    </error-page>
    <error-page>
        <error-code>404</error-code>
        <location>/error/</location>
    </error-page>
    <error-page>
        <error-code>405</error-code>
        <location>/error/</location>
    </error-page>
    <error-page>
        <error-code>500</error-code>
        <location>/error/</location>
    </error-page>

</web-app>